<!DOCTYPE html>
<html lang="ZH">
<head>
    <meta charset="UTF-8" />
    <title>RDP视觉框架-后屏管理端交易Demo</title>
    <script language="javascript" src="js/back/config_menu.js"></script>
    <script language="javascript" src="system_view/js/back/system_header.js"></script>
    <object classid="CLSID:241C149B-7C2B-498A-8956-3C9910609577" id="NtScreen" height="0" width="0"></object>
    <OBJECT id="Nt_Sqlite3" classid="clsid:9C95ED88-5105-4143-AB2E-7A450C914794" width="0" height="0"></OBJECT>
    <style type="text/css">
    /*内部样式写到这里*/

    </style>
</head>

<body style="overflow-x:hidden;overflow-y:hidden;" leftmargin="0" topmargin="0" marginwidth="0" marginheight="0" scroll="no">
    <div class="ctrl showmenu">yhgl</div> <!-- 控制-显示左侧菜单，取值范围showmenu, hidemenu -->
    <div class="ctrl enable-menu"></div> <!-- 控制-置灰左侧菜单，取值范围enable-menu, disable-menu -->
    <div class="ctrl disable_time"></div> <!-- 控制-是否显示倒计时, 取值范围disable_time,enable_time -->
    <div class="ctrl ensable_shutcut"></div> <!--- 控制-顶部功能快捷方式, 取值范围disable_shutcut， ensable_shutcut -->
    <script language="javascript" src="system_view/js/back/system_body.js"></script>
    <!-- tt标签位置 -->

    <div id="mainContent">
        <div id="title" class="header-text">用户管理</div>
        <div class="split-dashed"></div>

        <div class="query_form" >
          <div class="form-inline px14444">
            <div class="form-group">
              <span>用户ID</span>
              <input type="text" id="Query_UserId" class="ethink_input softkey"/>
            </div>
            <div class="form-group">
              <span>用户级别</span>
              <select id="Query_UserLevel" class="ethink_select">
                  <option value="all">--- 请选择 --- </option>
                  <option value="0"  >普通用户</option>
                  <option value="1"  >管理员</option>
              </select>
            </div>
            <div class="form-group">
              <span>交易时间</span>
              <input type="text" id="Query_CashValue" class="ethink_input"  />
            </div>
            <div class="form-group ">
              <button id="queryUser" class="btn btn-success" type="button">
                <i class="fa fa-search"></i>&nbsp;查询
              </button>
            </div>
          </div>
        </div>

        <div class="split-dashed"></div>

        <div class="query_form" >
          <div class="form-inline px14444">
            <div class="form-group float-right">
              <button id="addUser" class="btn btn-info" type="button" >
                <i class="fa fa-plus"></i>&nbsp;单列模态窗口
              </button>
              <button id="modifyUser" class="btn btn-success" type="button">
                <i class="fa fa-edit"></i>&nbsp;双列模态窗口
              </button>
              <button id="deleteUser" class="btn btn-primary" type="button">
                <i class="fa fa-times"></i>&nbsp;删除
              </button>
            </div>
          </div>
        </div>

        <div >
          <span>带单选框的数据网格</span>
          <table id="table_data_radio" class="table table-bordered supp-select support_dragscroll" style="width:1340px;">
                <thead>
                <tr>
                    <th class="th" style="width:40px;">选择</th>
                    <th class="th" style="width:140px;">唯一标志号</th>
                    <th class="th" style="width:80px;">交易类型</th>
                    <th class="th" style="width:160px;">交易时间</th>
                    <th class="th" style="width:80px;">交易币种</th>
                    <th class="th" style="width:120px;">交易金额</th>
                    <th class="th" style="width:120px;">机器交易金额</th>
                    <th class="th" style="width:80px;">交易状态</th>
                    <th class="th" style="width:150px;">异常原因</th>
                    <th class="th" style="width:100px;">交易流水号</th>
                    <th class="th" style="width:150px;">交易账号</th>
                    <th class="th" style="width:80px;">是否冲正</th>
                    <th class="th" style="width:80px;">操作柜员</th>
                    <th class="th" style="width:80px;">是否授权</th>
                    <th class="th" style="width:80px;">授权柜员</th>
                </tr>
                </thead>
                <tbody></tbody>
          </table>
        </div>

        <div class="query_form" >
          <div class="form-inline px14444">
            <div class="form-group float-right">
              <button id="query_serverSideUser" class="btn btn-success" type="button">
                <i class="fa fa-search"></i>&nbsp;查询
              </button>
            </div>
          </div>
        </div>
        <div >
          <span>后台分页的数据网格</span>
          <table id="table_serverdata_radio" class="table table-bordered supp-select support_dragscroll" >
                <thead>
                <tr>
                    <th class="th" style="width:40px;">选择</th>
                    <th class="th" style="width:140px;">唯一标志号</th>
                    <th class="th" style="width:80px;">交易类型</th>
                    <th class="th" style="width:160px;">交易时间</th>
                    <th class="th" style="width:80px;">交易币种</th>
                    <th class="th" style="width:120px;">交易金额</th>
                    <th class="th" >机器交易金额</th>
                </tr>
                </thead>
                <tbody></tbody>
          </table>
        </div>
        
        <div>
          <span>简单数据网格</span>
          <table id="table_simple" class="table table-bordered supp-select support_dragscroll" style="width:640px;">
                <thead>
                <tr>
                    <th class="th" style="width:40px;">序号</th>
                    <th class="th" style="width:140px;">唯一标志号</th>
                    <th class="th" style="width:80px;">交易类型</th>
                    <th class="th" style="width:160px;">交易时间</th>
                    <th class="th" style="width:80px;">交易币种</th>
                    <th class="th" >交易金额</th>
                </tr>
                </thead>
                <tbody></tbody>
          </table>
        </div>
        

    </div>


<!-- 弹出窗口定义区域 -->
<div id="cover" class="ethink_modal" style="display:block">
        <div id="addUserShow" >
          <div class="modal_header">单列模态窗口</div>
          <div class="modal_body form-horizontal">
            <div class="form-group">
                <span class="form-label ">用户ID</span>
                <input id="Add_UserId" type="text" class="ethink_input softkey"/>
            </div>
            <div class="form-group">
                <span class="form-label ">用户名称</span>
                <input id="Add_UserName" type="text" class="ethink_input softkey"/>
            </div>

            <div  class="form-group">
                <span class="form-label ">用户级别</span>
                <select id="Add_UserLevel" class="ethink_select">
                    <option value="all">--- 请选择 --- </option>
                    <option value="0"  >普通用户</option>
                    <option value="1"  >管理员</option>
                </select>
            </div>
          </div>
          <div class="modal_footer" >
              <button id="Add_Cancel" type="button" class="btn btn-default">取消</button>
              <button id="Add_Enter"  type="button" class="btn btn-success float-right">确定</button>
          </div>
      </div>
      <div id="dbrow" class="large">
            <div class="modal_header">双列模态窗口</div>
            <div class="modal_body">
                <!-- 左侧控件容器 -->
                <div class=" form-horizontal col-md-6">
                    <div class="form-group">
                        <span class="form-label ">介质类型</span>
                        <select id="MediaType" class="ethink_select" >
                            <option value="0" selected = "selected">IC卡</option>
                            <option value="1">磁条卡</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <span class="form-label ">单证名称</span>
                        <input id="DocumentName" type="text" class="ethink_input"/>
                    </div>
                    <div class="form-group">
                        <span class="form-label ">启用标识</span>
                        <select id="identify" class="ethink_select" >
                            <option value="0" selected = "selected">未启用</option>
                            <option value="1">启用</option>
                        </select>
                    </div>
                    <div class="form-group" style="height:70px;">
                        <span class="form-label ">凭证类型图片</span>
                        <label title="Upload image file" class="ethink_input">
                          <input type="file" accept="image/*" name="file" id="inputImage" class="hide">
                          请选择
                        </label>
                    </div>
                </div>
                
                <!-- 右侧控件容器 -->
                <div class="form-horizontal col-md-6">
                    <div class="form-group">
                        <span class="form-label ">单证代码</span>
                        <input id="DocumentCode" type="text" class="ethink_input" />
                    </div>
                    <div class="form-group">
                        <span class="form-label ">卡类别</span>
                        <input id="DocumentType" type="text" class="ethink_input"/>
                    </div>
                    <div class="form-group">
                        <span class="form-label ">卡品种</span>
                        <input id="DocumentVariety" type="text" class="ethink_input"/>
                    </div>
                     <div class="form-group">
                        <span class="form-label "></span>
                        <div id="preview" class="float-right" >
                            <img id="img_show" style="height: 70px;" width=100 border=0 >
                        </div>
                    </div>
                </div>

            </div><!-- 模态窗口body结束 -->
            <div class="modal_footer" >
                <button id="Add_Cancel" type="button" class="btn btn-default">取消</button>
                <button id="Add_Enter"  type="button" class="btn btn-success float-right">确定</button>
            </div>

        </div>

</div>
<!-- 弹出窗口定义区域结束 -->

<div id="softkey" class="ethink_softkey" style="position: fixed; bottom: 0px; left: 0px; width: 100%;" ></div>

    <script language="javascript" src="system_view/js/back/system_footer.js"></script>
    <script type="text/javascript">
(function(){

  // 添加软键盘支持
  $('input.softkey').click(function(){
    VirtualKeyboard.open(this.id, 'softkey');
  });
  
  // -----------带选择框的数据网格--------------------------------------------------
  var selectTable = Ethink.table('table_data_radio', {paging: true});
  // 添加单选框支持, 注册行选中事件
  selectTable.support_select().selected(function(row){
    console.info(row.index)
    console.info(row.data);
  });

  // 模拟数据查询
  $('#queryUser').click(function(){
    // 网格测试数据
    var testData = [];
    for(var i=0; i<83; i++){
      testData.push(['000'+i, '定期整整', '000'+i, '定期整整', '100.00', '3月', '20170625', 'CNY',  '3月', '20170625', 'CNY', '3月', '20170625', 'CNY']);
    }
    selectTable.data(testData);
  });


  // ------------普通数据网格--------------------------------------------------------
  var simpleTable = Ethink.table('table_simple', {paging: false});
  var simpleData = [];
  for(var i=0; i<6; i++){
    simpleData.push([''+i, '定期整整', '000'+i, '定期整整', '100.00', '100.00']);
  }
  simpleTable.data(simpleData);


  // ------------后台翻页的数据网格--------------------------------------------------------
  var serverdataTable = Ethink.table('table_serverdata_radio', {      
        // 开启分页功能
        paging: true,
        // 后台分页数据
        serverData: true
  });
  // 添加选中行支持
  serverdataTable.support_select().selected(function(row){
    console.info(row.index)
    console.info(row.data);
  });
  // 注册数据源
  serverdataTable.data(function(startnum, pagesize){
    // 模拟分页数据, startnum:本页起始行，pagesize:每页条数
    var testData = [];
    for(var i=0; i<pagesize; i++){
      var index = i + startnum;
      testData.push(['000'+index, '定期整整', '000'+index, '定期整整', '100.00', '3月']);
    }
    // 返回分页数据
    return {data:testData, totalSize:60};
  });
  // 注册查询事件
  $('#query_serverSideUser').click(function(){
    serverdataTable.reload();
  });



  // 弹出新增用户模态窗口
  $('#addUser').click(function(){
    Ethink.modal('addUserShow');
  });
  $('#modifyUser').click(function(){
    Ethink.modal('dbrow');
  })

  // 图片选择逻辑
  $('#inputImage').change(function() {
      if (!this.files.length) {
          return;
      }

      var fileReader = new FileReader(),
              $inputImage = $(this),
              file = this.files[0];

      if (/^image\/\w+$/.test(file.type)) {
          fileReader.readAsDataURL(file);
          fileReader.onload = function () {
              $inputImage.val("");
              $('#img_show').attr('src', this.result);
          };
      } else {
          Ethink.warning("请选择图片文件");
      }
  });

  // 取消逻辑
  $('#addUserShow #Add_Cancel, #dbrow #Add_Cancel').click(function(){
    Ethink.modal_api('addUserShow').close();
  });
  // 确定逻辑
  $('#addUserShow #Add_Enter, #dbrow #Add_Enter').click(function(){
    Ethink.modal_api('addUserShow').close();
  });

  // 初始化日历控件
  $('#Query_CashValue').datetimepicker();


  // 页面滚动支持, 注意生产请勿使用下面代码
  Ethink.support_mainscroll();
})();


</script>
</body>
</html>
