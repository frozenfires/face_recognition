(function(){var a=0;function f(){if(a++>50){alert("程序异常，请联系管理员-91！");}var j=document.getElementsByTagName("tt")[0];if(j&&(j.innerHTML===""||!j.innerHTML)&&a<50){window.setTimeout(f,5);}else{try{window.setTimeout(i,10);}catch(k){}}}function h(k){try{$("#"+systemConfig.controllerStep_paramid).html(k);NtScreen.FinishInput(systemConfig.controllerStep);}catch(j){alert("流程调用出错"+systemConfig.controllerStep+"->"+k+"\n"+j);}}function c(j){if($(".ctrl.disable_shutcut").length>0){return;}h(systemConfig.modifyPswd_stepid);}function e(j){if($(".ctrl.disable_shutcut").length>0){return;}Ethink.confirm("锁定屏幕","请确认是否锁定屏幕！",function(){$("#system_lock").show();$("#User_Id").val($("#TellerNumVal").html());});}function d(j){if($(".ctrl.disable_shutcut").length>0){return;}Ethink.confirm("退出","请确认是否退出维护！",function(){h(systemConfig.ExitBack_stepid);});}function b(j){document.getElementById("Nt_Sqlite3").QueryData("D:\\RDP\\NtData.db",j);return document.getElementById("Nt_Sqlite3").sResult;}function g(k){var o=function(s){Ethink.error(s);$("#lock_softkey").hide();};var p=document.getElementById("User_Id").value;var l=document.getElementById("User_Pswd").value;var r='select User_Pswd from USERINFO where User_Id = "'+p+'";';var m;try{m=b(r);}catch(n){o(n);return;}var q=m.split("|");var j=q[1];if(p===""||p===undefined){o("柜员号不存在！");}else{if(j!=l){o("密码不正确！");}else{$("#system_lock").hide();$("#User_Id").val("");$("#User_Pswd").val("");}}}function i(l){var k;try{k=systemConfig.getUsergroup();}catch(n){alert("获取系统角色出错\n"+n);return;}if(k&&k!=""){var m=systemConfig.user_group[k];for(var j=0;m&&j<m.length;j++){$(".menu li a#"+m[j]).parent("li").show();}}else{$(".menu li").show();}}(function(j){$("#lockscreen").click(e);$("#logout").click(d);$("#lock_login").click(g);$("#modifyPswd").click(c);$("#User_Pswd").click(function(){VirtualKeyboard.open(this.id,"lock_softkey");$("#lock_softkey").show();});f();})();})();